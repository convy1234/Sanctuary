<!-- templates/inventory/items/delete_confirm.html -->
{% extends "base.html" %}

{% block title %}Delete {{ item.name }} - Inventory{% endblock %}

{% block content %}
<div class="main">
    <div class="section-card" style="max-width:500px; margin:40px auto; text-align:center;">
        <div style="font-size:64px; margin-bottom:20px;">üóëÔ∏è</div>
        <h1 style="margin:0 0 16px;">Delete Item</h1>
        <p class="muted" style="margin-bottom:24px;">
            Are you sure you want to permanently delete this item?
        </p>
        
        <!-- Item Preview -->
        <div style="background:#f9fafb; border-radius:12px; padding:20px; margin-bottom:30px; text-align:left;">
            <div style="display:flex; align-items:center; gap:12px; margin-bottom:16px;">
                {% if item.image %}
                <img src="{{ item.image.url }}" alt="{{ item.name }}" 
                     style="width:50px; height:50px; border-radius:8px; object-fit:cover;">
                {% endif %}
                <div>
                    <strong>{{ item.name }}</strong>
                    <div class="muted" style="font-size:14px;">{{ item.sku|default:"No SKU" }}</div>
                </div>
            </div>
            
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
                <div>
                    <div class="muted" style="font-size:12px;">Current Stock</div>
                    <div style="font-weight:700;">{{ item.quantity }}</div>
                </div>
                <div>
                    <div class="muted" style="font-size:12px;">Department</div>
                    <div>{{ item.department.name|default:"None" }}</div>
                </div>
                <div>
                    <div class="muted" style="font-size:12px;">Value</div>
                    <div>‚Ç¶{{ item.total_value|floatformat:2 }}</div>
                </div>
                <div>
                    <div class="muted" style="font-size:12px;">Status</div>
                    <div style="color:
                        {% if item.quantity <= 0 %}#dc2626;
                        {% elif item.is_low_stock %}#92400e;
                        {% else %}#065f46;
                        {% endif %}">
                        {% if item.quantity <= 0 %}Out of Stock
                        {% elif item.is_low_stock %}Low Stock
                        {% else %}In Stock
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Warnings -->
        <div style="background:#fef3c7; border:1px solid #f59e0b; border-radius:10px; padding:16px; margin-bottom:30px; text-align:left;">
            <div style="display:flex; align-items:flex-start; gap:8px; color:#92400e;">
                <span style="font-size:20px;">‚ö†Ô∏è</span>
                <div>
                    <strong>Warning</strong>
                    <div style="font-size:14px; margin-top:4px;">
                        This action cannot be undone. All transaction history and data for this item will be permanently deleted.
                    </div>
                </div>
            </div>
            
            {% if active_checkouts %}
            <div style="margin-top:12px; padding-top:12px; border-top:1px solid rgba(245, 158, 11, 0.3);">
                <div style="color:#dc2626; font-weight:700; margin-bottom:8px;">Active Checkouts</div>
                <div style="font-size:14px;">
                    This item has {{ active_checkouts.count }} active checkouts. Please return all items before deleting.
                </div>
            </div>
            {% endif %}
        </div>
        
        <!-- Actions -->
        <div style="display:flex; flex-direction:column; gap:12px;">
            {% if not active_checkouts %}
            <form method="post" style="width:100%;">
                {% csrf_token %}
                <button type="submit" 
                        style="width:100%; padding:16px; background:#dc2626; color:white; border:none; border-radius:10px; font-weight:600; cursor:pointer;">
                    Yes, Delete Permanently
                </button>
            </form>
            {% endif %}
            
            <a href="{% url 'inventory_item_detail' item.id %}" 
               style="width:100%; padding:16px; text-align:center; border:1px solid var(--border); border-radius:10px; text-decoration:none; color:inherit;">
                No, Keep Item
            </a>
            
            {% if active_checkouts %}
            <div style="margin-top:12px; padding-top:12px; border-top:1px solid var(--border);">
                <a href="{% url 'inventory_checkout_list' %}?item={{ item.id }}" 
                   style="color:#4f46e5; text-decoration:none; font-size:14px;">
                    View active checkouts ‚Üí
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}